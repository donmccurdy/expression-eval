!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r():"function"==typeof define&&define.amd?define(r):r()}(0,function(){var e=function(t,i){try{var s=!1;function c(){if("function"==typeof l){var e=l,r=e.apply,o=a;return Promise.resolve(n(t.arguments,i)).then(function(n){return Promise.resolve(r.call(e,o,n))})}}switch(t.type){case"ArrayExpression":return Promise.resolve(n(t.elements,i));case"BinaryExpression":return Promise.resolve(Promise.all([e(t.left,i),e(t.right,i)])).then(function(e){return o[t.operator](e[0],e[1])});case"CallExpression":var a,l,f,p="MemberExpression"===t.callee.type?Promise.resolve(r(t.callee,i)).then(function(e){a=(f=e)[0],l=f[1]}):Promise.resolve(e(t.callee,i)).then(function(e){l=e});return Promise.resolve(p&&p.then?p.then(c):c());case"ConditionalExpression":return Promise.resolve(e(t.test,i)).then(function(r){return Promise.resolve(e(r?t.consequent:t.alternate,i))});case"Identifier":return Promise.resolve(i[t.name]);case"Literal":return Promise.resolve(t.value);case"LogicalExpression":{function m(r){return s?r:Promise.resolve(Promise.all([e(t.left,i),e(t.right,i)])).then(function(e){return o[t.operator](e[0],e[1])})}var v="||"===t.operator?(s=!0,Promise.resolve(e(t.left,i)).then(function(r){return r||Promise.resolve(e(t.right,i))})):function(){if("&&"===t.operator)return s=!0,Promise.resolve(e(t.left,i)).then(function(r){return r?Promise.resolve(e(t.right,i)):r})}();return Promise.resolve(v&&v.then?v.then(m):m(v))}case"MemberExpression":return Promise.resolve(r(t,i)).then(function(e){return e[1]});case"ThisExpression":return Promise.resolve(i);case"UnaryExpression":var h=u[t.operator];return Promise.resolve(e(t.argument,i)).then(function(e){return h.call(u,e)});default:return Promise.resolve(void 0)}}catch(e){return Promise.reject(e)}},r=function(r,n){try{return Promise.resolve(e(r.object,n)).then(function(t){return r.computed?Promise.resolve(e(r.property,n)).then(function(e){return[t,t[e]]}):[t,t[r.property.name]]})}catch(e){return Promise.reject(e)}},n=function(r,n){try{return Promise.resolve(Promise.all(r.map(function(r){return e(r,n)})))}catch(e){return Promise.reject(e)}},t=require("jsep"),o={"||":function(e,r){return e||r},"&&":function(e,r){return e&&r},"|":function(e,r){return e|r},"^":function(e,r){return e^r},"&":function(e,r){return e&r},"==":function(e,r){return e==r},"!=":function(e,r){return e!=r},"===":function(e,r){return e===r},"!==":function(e,r){return e!==r},"<":function(e,r){return e<r},">":function(e,r){return e>r},"<=":function(e,r){return e<=r},">=":function(e,r){return e>=r},"<<":function(e,r){return e<<r},">>":function(e,r){return e>>r},">>>":function(e,r){return e>>>r},"+":function(e,r){return e+r},"-":function(e,r){return e-r},"*":function(e,r){return e*r},"/":function(e,r){return e/r},"%":function(e,r){return e%r}},u={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function i(e,r){return e.map(function(e){return c(e,r)})}function s(e,r){var n=c(e.object,r);return e.computed?[n,n[c(e.property,r)]]:[n,n[e.property.name]]}function c(e,r){switch(e.type){case"ArrayExpression":return i(e.elements,r);case"BinaryExpression":return o[e.operator](c(e.left,r),c(e.right,r));case"CallExpression":var n,t,a;if("MemberExpression"===e.callee.type?(n=(a=s(e.callee,r))[0],t=a[1]):t=c(e.callee,r),"function"!=typeof t)return;return t.apply(n,i(e.arguments,r));case"ConditionalExpression":return c(e.test,r)?c(e.consequent,r):c(e.alternate,r);case"Identifier":return r[e.name];case"Literal":return e.value;case"LogicalExpression":return"||"===e.operator?c(e.left,r)||c(e.right,r):"&&"===e.operator?c(e.left,r)&&c(e.right,r):o[e.operator](c(e.left,r),c(e.right,r));case"MemberExpression":return s(e,r)[1];case"ThisExpression":return r;case"UnaryExpression":return u[e.operator](c(e.argument,r));default:return}}module.exports={parse:t,eval:c,evalAsync:e,compile:function(e){return c.bind(null,t(e))},compileAsync:function(r){return e.bind(null,t(r))}}});
//# sourceMappingURL=expression-eval.umd.js.map
